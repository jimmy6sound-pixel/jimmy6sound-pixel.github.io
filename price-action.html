<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»·æ ¼è¡Œä¸ºäº¤æ˜“å…¨ä¹¦ | The Authoritative Price Action Handbook</title>
    <style>
        :root {
            --bg-dark: #131722;
            --bg-card: #1e222d;
            --text-primary: #e0e3eb;
            --text-secondary: #b2b5be;
            --accent-blue: #2962ff;
            --accent-green: #089981;
            --accent-red: #f23645;
            --accent-orange: #ffa726;
            --accent-purple: #7e57c2;
            --border: #2a2e39;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-primary);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.7;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header */
        header {
            text-align: center;
            padding: 80px 20px;
            background: linear-gradient(180deg, rgba(41,98,255,0.1) 0%, rgba(19,23,34,0) 100%);
            border-bottom: 1px solid var(--border);
            margin-bottom: 40px;
        }
        h1 { 
            font-size: 2.8rem; 
            margin: 0; 
            color: #fff;
            font-weight: 700;
        }
        .subtitle { 
            font-size: 1.4rem; 
            color: var(--accent-blue); 
            margin-top: 15px;
        }
        .tagline { 
            color: var(--text-secondary); 
            font-size: 1.0rem; 
            margin-top: 10px;
        }

        /* Card */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        h2 { 
            color: #fff; 
            border-left: 5px solid var(--accent-blue); 
            padding-left: 20px; 
            margin-top: 0; 
            font-size: 2.0rem;
            font-weight: 700;
            margin-bottom: 30px;
        }
        
        h3 { 
            color: var(--text-primary); 
            margin-top: 35px; 
            font-size: 1.4rem;
            border-bottom: 1px solid var(--border);
            padding-bottom: 12px;
            font-weight: 600;
        }

        h4 {
            color: var(--accent-blue);
            margin-top: 25px;
            font-size: 1.1rem;
            font-weight: 600;
        }

        p, li {
            color: var(--text-secondary);
            font-size: 1.05rem;
            margin-bottom: 15px;
        }
        strong { 
            color: #fff; 
            font-weight: 600;
        }

        /* Highlight Box */
        .highlight-box {
            background: rgba(41, 98, 255, 0.1);
            border-left: 4px solid var(--accent-blue);
            padding: 20px;
            margin: 25px 0;
            border-radius: 8px;
        }
        .highlight-box.success {
            background: rgba(8, 153, 129, 0.1);
            border-left-color: var(--accent-green);
        }
        .highlight-box.warning {
            background: rgba(242, 54, 69, 0.1);
            border-left-color: var(--accent-red);
        }

        /* Stat Boxes */
        .stat-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .stat-box {
            background: #2a2e39;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
        }
        .stat-num { 
            font-size: 2.8rem; 
            font-weight: 800; 
            color: var(--accent-blue); 
            display: block;
            margin-bottom: 10px;
        }
        .stat-label { 
            font-size: 1.0rem; 
            color: var(--text-secondary); 
        }

        /* Diagrams */
        .diagram-box {
            background: #000;
            border: 1px dashed var(--border);
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .fig-caption {
            text-align: center;
            font-size: 1.0rem;
            color: var(--text-secondary);
            margin-top: 15px;
            font-style: italic;
        }

        /* Comparison Table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
        }
        .comparison-table th {
            background: #2a2e39;
            color: #fff;
            padding: 18px;
            text-align: left;
            font-weight: 600;
        }
        .comparison-table td {
            background: rgba(42, 46, 57, 0.3);
            padding: 15px;
            border: 1px solid var(--border);
        }
        .comparison-table tr:nth-child(even) td {
            background: rgba(42, 46, 57, 0.5);
        }

        /* Colors */
        .c-green { color: var(--accent-green); font-weight: 600; }
        .c-red { color: var(--accent-red); font-weight: 600; }
        .c-orange { color: var(--accent-orange); font-weight: 600; }
        .c-blue { color: var(--accent-blue); font-weight: 600; }

        /* Pattern Card */
        .pattern-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .pattern-card {
            background: #2a2e39;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            transition: transform 0.2s;
        }
        .pattern-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-blue);
        }
        .pattern-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--accent-blue);
            margin-bottom: 15px;
        }
        .pattern-desc {
            font-size: 0.95rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* === SIMULATOR STYLES === */
        
        .timeframe-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .timeframe-selector button {
            padding: 10px 20px;
            background: #2a2e39;
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.95rem;
            font-weight: 500;
        }
        .timeframe-selector button:hover {
            background: #363a4a;
        }
        .timeframe-selector button.active {
            background: var(--accent-blue);
            color: white;
            border-color: var(--accent-blue);
        }

        .chart-wrapper {
            position: relative;
            background: #000;
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: rgba(30, 34, 45, 0.8);
            border-bottom: 1px solid var(--border);
        }
        
        .chart-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .chart-indicators {
            display: flex;
            gap: 20px;
            font-size: 0.9rem;
        }
        
        .indicator {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .indicator-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .chart-container {
            position: relative;
            height: 500px;
        }
        
        canvas {
            display: block;
            width: 100%;
            height: 100%;
            cursor: crosshair;
        }

        .signal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
        }
        
        .signal-marker {
            position: absolute;
            font-size: 24px;
            transition: transform 0.2s;
            animation: pulse 2s infinite;
            filter: drop-shadow(0 0 4px rgba(0,0,0,0.5));
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .trading-panel {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .panel-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .panel-section {
            flex: 1;
            min-width: 200px;
        }
        
        .section-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .strategy-selector select {
            width: 100%;
            padding: 12px;
            background: #2a2e39;
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 1rem;
            cursor: pointer;
        }

        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }
        .btn:hover:not(:disabled) { 
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        .btn:active:not(:disabled) { 
            transform: translateY(0); 
        }
        .btn:disabled { 
            opacity: 0.4; 
            cursor: not-allowed; 
        }
        .btn-blue { background: var(--accent-blue); color: white; }
        .btn-buy { background: var(--accent-green); color: white; }
        .btn-sell { background: var(--accent-red); color: white; }
        .btn-gray { background: #444; color: white; }
        .btn-next { background: #7e57c2; color: white; }

        .hud {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            background: #000;
            padding: 20px;
            border-radius: 8px;
        }
        
        .hud-item {
            text-align: center;
        }
        
        .hud-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .hud-value {
            font-size: 1.5rem;
            font-weight: 700;
            font-family: 'Courier New', monospace;
        }
        
        .hud-value.positive { color: var(--accent-green); }
        .hud-value.negative { color: var(--accent-red); }
        .hud-value.neutral { color: var(--accent-blue); }

        .trade-history {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
        }
        
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .history-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .clear-history {
            padding: 6px 12px;
            background: #2a2e39;
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }
        .clear-history:hover {
            background: #363a4a;
        }
        
        #tradeList {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .trade-item {
            padding: 12px;
            border-bottom: 1px solid var(--border);
            display: grid;
            grid-template-columns: auto 1fr auto auto;
            gap: 15px;
            align-items: center;
            font-size: 0.9rem;
            transition: background 0.2s;
        }
        .trade-item:hover {
            background: rgba(42, 46, 57, 0.3);
        }
        .trade-item:last-child {
            border-bottom: none;
        }
        
        .trade-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }
        .trade-badge.long { background: rgba(8, 153, 129, 0.2); color: var(--accent-green); }
        .trade-badge.short { background: rgba(242, 54, 69, 0.2); color: var(--accent-red); }
        
        .trade-details {
            color: var(--text-secondary);
        }
        
        .trade-pnl {
            font-weight: 700;
            font-family: 'Courier New', monospace;
        }
        
        .trade-time {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .speed-slider {
            flex: 1;
            height: 4px;
            background: #2a2e39;
            border-radius: 2px;
            outline: none;
            -webkit-appearance: none;
        }
        
        .speed-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: var(--accent-blue);
            border-radius: 50%;
            cursor: pointer;
        }
        
        .speed-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            min-width: 60px;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: var(--text-secondary);
        }

        footer {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
            border-top: 1px solid var(--border);
            margin-top: 60px;
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: var(--bg-dark);
        }
        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #3a3e4a;
        }

        /* æ–°å¢ï¼šå¿ƒç†å­¦å¯¹æ¯”å¡ç‰‡ */
        .psychology-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }
        .psychology-card {
            background: #2a2e39;
            border-radius: 10px;
            padding: 25px;
            border: 1px solid var(--border);
        }
        .psychology-card.institution {
            border-left: 4px solid var(--accent-green);
        }
        .psychology-card.novice {
            border-left: 4px solid var(--accent-red);
        }
        .psychology-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        .psychology-icon {
            font-size: 2rem;
        }
        .psychology-title {
            font-size: 1.3rem;
            font-weight: 700;
        }
        .psychology-card.institution .psychology-title {
            color: var(--accent-green);
        }
        .psychology-card.novice .psychology-title {
            color: var(--accent-red);
        }
    </style>
</head>
<body>

<header>
    <div class="container">
        <h1>ä»·æ ¼è¡Œä¸ºäº¤æ˜“å…¨ä¹¦</h1>
        <div class="subtitle">The Authoritative Price Action Handbook</div>
        <div class="tagline">è¯»æ‡‚å¸‚åœºçš„æ•…äº‹ | æ ¸å¿ƒç†è®º | å®æˆ˜ç­–ç•¥ | æ™ºèƒ½æ¨¡æ‹Ÿ</div>
    </div>
</header>

<div class="container">

    <!-- ========================================== -->
    <!-- PART 0: INTRODUCTION (æ–°å¢éƒ¨åˆ†) -->
    <!-- ========================================== -->
    <div class="card">
        <h2>å¼•è¨€ï¼šè¯»æ‡‚å¸‚åœºçš„æ•…äº‹</h2>
        
        <div class="highlight-box">
            <strong>æ ¸å¿ƒç†å¿µï¼š</strong>ä»·æ ¼è¡Œä¸ºäº¤æ˜“çš„æœ¬è´¨æ˜¯é€æ ¹Kçº¿åˆ†æå›¾è¡¨ï¼Œå­¦ä¹ å®æ—¶è§£è¯»å¸‚åœºè®²è¿°çš„æ•…äº‹ã€‚è¿™ç§æ–¹æ³•çš„æ ¸å¿ƒä»·å€¼åœ¨äºç›´æ¥æ€§â€”â€”å®ƒæ•™ä¼šä½ ç›´æ¥ä»å›¾è¡¨ä¸­è§£è¯»å¸‚åœºè¡Œä¸ºå’Œå¿ƒç†ï¼Œè€Œä¸å—æ»åæŒ‡æ ‡çš„å¹²æ‰°æˆ–å»¶è¿Ÿã€‚
        </div>

        <p>æ¬¢è¿æ¥åˆ°ä»·æ ¼è¡Œä¸ºäº¤æ˜“çš„ä¸–ç•Œã€‚å¯¹äºä¸¥è‚ƒçš„äº¤æ˜“è€…æ¥è¯´ï¼Œè¿™é—¨å­¦ç§‘æ˜¯å…³äºé€æ ¹Kçº¿åˆ†æä»·æ ¼å›¾è¡¨ï¼Œå­¦ä¹ å®æ—¶è§£è¯»å¸‚åœºè®²è¿°çš„æ•…äº‹ã€‚è¿™ç§æ–¹æ³•çš„æ ¸å¿ƒä»·å€¼åœ¨äºå…¶ç›´æ¥æ€§ï¼›å®ƒæ•™ä¼šä½ ç›´æ¥ä»å›¾è¡¨ä¸­è§£è¯»å¸‚åœºè¡Œä¸ºå’Œå¿ƒç†ï¼Œè€Œä¸å—æ»åæŒ‡æ ‡çš„å¹²æ‰°æˆ–å»¶è¿Ÿã€‚</p>

        <p>æœ¬æŒ‡å—å°†å»ºç«‹ä¸€ä¸ªåšå®çš„ç†è®ºåŸºç¡€ï¼Œå‘ä½ ä»‹ç»æ”¯æ’‘æ‰€æœ‰é«˜çº§ä»·æ ¼è¡Œä¸ºç­–ç•¥çš„åŸºæœ¬æ¦‚å¿µã€‚é€šè¿‡ç†è§£è¿™äº›æ ¸å¿ƒç†å¿µï¼Œä½ å°†è¿ˆå‡ºé˜…è¯»ä»»ä½•å›¾è¡¨å¹¶åšå‡ºæ˜æ™ºäº¤æ˜“å†³ç­–çš„ç¬¬ä¸€æ­¥ã€‚</p>

        <div class="stat-row">
            <div class="stat-box">
                <span class="stat-num">90%</span>
                <span class="stat-label">ä¸“ä¸šäº¤æ˜“è€…<br>ä½¿ç”¨ä»·æ ¼è¡Œä¸ºåˆ†æ</span>
            </div>
            <div class="stat-box">
                <span class="stat-num">80%</span>
                <span class="stat-label">äº¤æ˜“å†³ç­–åŸºäº<br>ä»·æ ¼å›¾è¡¨åˆ†æ</span>
            </div>
            <div class="stat-box">
                <span class="stat-num">95%</span>
                <span class="stat-label">æˆåŠŸäº¤æ˜“è€…<br>ç†è§£å¸‚åœºå¿ƒç†</span>
            </div>
        </div>
    </div>

    <!-- ========================================== -->
    <!-- PART 1: CORE FOUNDATION (èåˆæŠ¥å‘Šå†…å®¹) -->
    <!-- ========================================== -->
    <div class="card">
        <h2>ç¬¬ä¸€éƒ¨åˆ†ï¼šä»·æ ¼è¡Œä¸ºæ ¸å¿ƒåŸºç¡€</h2>

        <h3>1. ä¸¤ç§åŸºæœ¬å¸‚åœºçŠ¶æ€ï¼šè¶‹åŠ¿ vs éœ‡è¡åŒºé—´</h3>
        
        <p>å¸‚åœºçš„æ‰€æœ‰æ´»åŠ¨éƒ½å­˜åœ¨äºä¸¤ç§ä¸»è¦çŠ¶æ€ä¹‹é—´çš„å…‰è°±ä¸Šï¼š<strong>æç«¯è¶‹åŠ¿</strong>æˆ–<strong>æç«¯éœ‡è¡åŒºé—´</strong>ã€‚</p>
        
        <div class="highlight-box success">
            <strong>æ¯”å–»ç†è§£ï¼š</strong>
            <ul style="margin-top: 10px;">
                <li><strong>è¶‹åŠ¿</strong> = å¼ºå¤§çš„æ²³æµï¼Œæœæ–­åœ°æœä¸€ä¸ªæ–¹å‘æµåŠ¨</li>
                <li><strong>éœ‡è¡åŒºé—´</strong> = å¹³é™çš„æ¹–æ³Šï¼Œä»·æ ¼æ¥å›ç§»åŠ¨è€Œæ²¡æœ‰æ˜ç¡®æ–¹å‘</li>
            </ul>
        </div>

        <h3>2. è§£ç è¶‹åŠ¿ï¼šæœºæ„ä¸æ•£æˆ·çš„å¿ƒç†å·®å¼‚</h3>
        
        <p>è¶‹åŠ¿æ˜¯å¸‚åœºæŒç»­æœä¸€ä¸ªæ–¹å‘ç§»åŠ¨çš„æ—¶æœŸã€‚ä¸Šå‡è¶‹åŠ¿çš„ç‰¹ç‚¹æ˜¯ä¸€ç³»åˆ—æ›´é«˜çš„é«˜ç‚¹å’Œæ›´é«˜çš„ä½ç‚¹ï¼Œè€Œä¸‹é™è¶‹åŠ¿çš„ç‰¹ç‚¹æ˜¯ä¸€ç³»åˆ—æ›´ä½çš„é«˜ç‚¹å’Œæ›´ä½çš„ä½ç‚¹ã€‚ç†è§£é©±åŠ¨è¿™äº›ç§»åŠ¨çš„å¿ƒç†è‡³å…³é‡è¦ã€‚</p>

        <h4>å…³é”®å¿ƒç†æ´å¯Ÿ</h4>
        
        <div class="psychology-comparison">
            <div class="psychology-card institution">
                <div class="psychology-header">
                    <div class="psychology-icon">ğŸ¦</div>
                    <div class="psychology-title">æœºæ„è¡Œä¸º</div>
                </div>
                <div class="pattern-desc">
                    åœ¨å¼ºåŠ²çš„ç‰›å¸‚è¶‹åŠ¿ä¸­ï¼Œå¤§å‹æœºæ„å’Œä¸“ä¸šäº¤æ˜“è€…ä¼šæŒç»­ä¹°å…¥ã€‚ä»–ä»¬<strong class="c-green">å®³æ€•é”™è¿‡é‡å¤§è¡Œæƒ…</strong>ï¼Œè€Œä¸æ˜¯å®³æ€•åœ¨ä¸´æ—¶é«˜ç‚¹ä¹°å…¥ã€‚å¦‚æœå¸‚åœºç¨å¾®å›è°ƒï¼Œä»–ä»¬é€šå¸¸å°†å…¶è§†ä¸ºåŠ ä»“æœºä¼šï¼Œè€Œä¸æ˜¯ææ…Œçš„ç†ç”±ã€‚
                </div>
            </div>
            
            <div class="psychology-card novice">
                <div class="psychology-header">
                    <div class="psychology-icon">ğŸ“</div>
                    <div class="psychology-title">æ–°æ‰‹è¡Œä¸º</div>
                </div>
                <div class="pattern-desc">
                    ç›¸æ¯”ä¹‹ä¸‹ï¼Œåˆå­¦è€…çœ‹åˆ°å¼ºåŠ²è¶‹åŠ¿æ—¶å¾€å¾€è§‰å¾—å¸‚åœº"å¤ªé«˜äº†"è€Œä¸æ•¢ä¹°å…¥ã€‚ä»–ä»¬<strong class="c-red">å®³æ€•åœ¨æœ€é«˜ç‚¹ä¹°å…¥</strong>ï¼Œç­‰å¾…å¤§å¹…å›è°ƒä»¥ä¾¿ä»¥"æ›´å¥½çš„ä»·æ ¼"å…¥åœºã€‚åœ¨å¼ºè¶‹åŠ¿ä¸­ï¼Œè¿™ç§å›è°ƒå¯èƒ½æ°¸è¿œä¸ä¼šåˆ°æ¥ï¼Œä»–ä»¬å°±ä¼šé”™è¿‡æ•´ä¸ªè¡Œæƒ…ã€‚
                </div>
            </div>
        </div>

        <h3>3. ç†è§£éœ‡è¡åŒºé—´ï¼šç£åŠ›æ•ˆåº”</h3>
        
        <p>éœ‡è¡åŒºé—´æ˜¯å¤šç©ºåŒæ–¹åœ¨ä»·å€¼ä¸Šè¾¾æˆæ™®éå…±è¯†çš„å¹³è¡¡æˆ–å‡è¡¡æ—¶æœŸã€‚ä»·æ ¼åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ°´å¹³ç§»åŠ¨ï¼Œåœ¨åº•éƒ¨å½¢æˆæ”¯æ’‘ï¼Œåœ¨é¡¶éƒ¨å½¢æˆé˜»åŠ›ã€‚</p>

        <div class="highlight-box warning">
            <strong>âš ï¸ åˆå­¦è€…æœ€é‡è¦çš„æ´å¯Ÿï¼š</strong><br>
            å¤§å¤šæ•°çªç ´éœ‡è¡åŒºé—´çš„å°è¯•éƒ½ä¼šå¤±è´¥ã€‚è¿™æ˜¯å› ä¸ºåŒºé—´å†…çš„æ—¢å®šè¡Œä¸ºâ€”â€”ä½ä¹°é«˜å–â€”â€”æ˜¯è‡ªæˆ‘å¼ºåŒ–çš„ã€‚å‘ä¸Šçªç ´çš„å°è¯•ä¼šé­é‡å–å‹ï¼Œå‘ä¸‹çªç ´çš„å°è¯•ä¼šé­é‡ä¹°å‹ï¼Œå°†ä»·æ ¼æ¨å›åŒºé—´ä¸­é—´ã€‚
        </div>

        <h3>4. å¸‚åœºè¿åŠ¨ï¼šçªç ´ã€å›è°ƒä¸åè½¬</h3>

        <h4>çªç ´ï¼šå¼ºå¼±åˆ¤æ–­æ ‡å‡†</h4>
        
        <table class="comparison-table">
            <thead>
                <tr>
                    <th>å¼ºçªç ´çš„è¿¹è±¡ âœ…</th>
                    <th>å¼±çªç ´çš„è¿¹è±¡ï¼ˆå¯èƒ½å¤±è´¥ï¼‰âŒ</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>çªç ´Kçº¿å®ä½“å¤§ï¼Œå½±çº¿å°ï¼ˆæˆ–æ— ï¼‰ï¼Œæ”¶ç›˜åœ¨é«˜ç‚¹ï¼ˆä¸Šå‡ï¼‰æˆ–ä½ç‚¹ï¼ˆä¸‹é™ï¼‰</td>
                    <td>çªç ´Kçº¿å®ä½“å°ï¼Œå½±çº¿å¤§ï¼Œè¡¨æ˜ä»·æ ¼åœ¨Kçº¿æ”¶ç›˜å‰åè½¬</td>
                </tr>
                <tr>
                    <td>æœ‰ç´§è¿«æ„Ÿï¼›ä½ æ„Ÿè§‰å¿…é¡»è¿½å¸‚åœºæ‰èƒ½è¿›åœºï¼Œå¸‚åœºä¸ç»™ä½ å›è°ƒæœºä¼š</td>
                    <td>ç¼ºä¹åç»­è·Ÿè¿›ï¼›çªç ´åçš„Kçº¿æœªèƒ½è¿›ä¸€æ­¥æœåŒä¸€æ–¹å‘ç§»åŠ¨</td>
                </tr>
                <tr>
                    <td>åç»­Kçº¿ä¹Ÿæœ‰å¼ºå®ä½“ï¼Œæœæ–­æœçªç ´æ–¹å‘ç§»åŠ¨</td>
                    <td>å¸‚åœºè¿…é€Ÿåè½¬å¹¶å›åˆ°çªç ´ç‚¹ä¸‹æ–¹ï¼ˆä¾‹å¦‚å›åˆ°éœ‡è¡åŒºé—´å†…ï¼‰</td>
                </tr>
                <tr>
                    <td>çªç ´ç§»åŠ¨å¾—åˆè¿œåˆå¿«ï¼Œé€šå¸¸æŒç»­å‡ æ ¹Kçº¿ï¼Œå½¼æ­¤ä¹‹é—´å‡ ä¹æ²¡æœ‰é‡å </td>
                    <td>å¸‚åœºåœ¨çªç ´åç«‹å³æš‚åœï¼Œäº§ç”Ÿå›°æƒ‘æˆ–ä¸ç¡®å®šæ„Ÿ</td>
                </tr>
            </tbody>
        </table>

        <h4>å›è°ƒï¼šäº”ç§ç»å…¸æ¨¡å¼</h4>
        
        <div class="diagram-box">
            <svg width="1000" height="400" viewBox="0 0 1000 400">
                <!-- ABC Correction -->
                <g transform="translate(50, 50)">
                    <text x="80" y="0" fill="#888" font-size="14" font-weight="bold" text-anchor="middle">ä¸¤æ®µå›è°ƒ (ABC)</text>
                    
                    <!-- Main trend up -->
                    <line x1="0" y1="200" x2="40" y2="120" stroke="#089981" stroke-width="2"/>
                    
                    <!-- Leg A (down) -->
                    <line x1="40" y1="120" x2="60" y2="160" stroke="#f23645" stroke-width="2"/>
                    <text x="50" y="180" fill="#f23645" font-size="12">A</text>
                    
                    <!-- Leg B (up) -->
                    <line x1="60" y1="160" x2="80" y2="140" stroke="#089981" stroke-width="2"/>
                    <text x="70" y="130" fill="#089981" font-size="12">B</text>
                    
                    <!-- Leg C (down) -->
                    <line x1="80" y1="140" x2="100" y2="150" stroke="#f23645" stroke-width="2"/>
                    <text x="90" y="170" fill="#f23645" font-size="12">C</text>
                    
                    <!-- Resume trend -->
                    <line x1="100" y1="150" x2="160" y2="60" stroke="#089981" stroke-width="3"/>
                    <circle cx="100" cy="150" r="4" fill="#fff"/>
                    <text x="130" y="40" fill="#089981" font-size="10" font-weight="bold">å…¥åœºç‚¹</text>
                </g>

                <!-- Wedge -->
                <g transform="translate(220, 50)">
                    <text x="80" y="0" fill="#888" font-size="14" font-weight="bold" text-anchor="middle">æ¥”å½¢ (Wedge)</text>
                    
                    <!-- Main trend -->
                    <line x1="0" y1="200" x2="40" y2="120" stroke="#089981" stroke-width="2"/>
                    
                    <!-- Push 1 -->
                    <line x1="40" y1="120" x2="60" y2="160" stroke="#f23645" stroke-width="2"/>
                    <text x="50" y="180" fill="#f23645" font-size="12">1</text>
                    
                    <!-- Push 2 (weaker) -->
                    <line x1="60" y1="160" x2="75" y2="145" stroke="#089981" stroke-width="2"/>
                    <line x1="75" y1="145" x2="90" y2="155" stroke="#f23645" stroke-width="2"/>
                    <text x="82" y="175" fill="#f23645" font-size="12">2</text>
                    
                    <!-- Push 3 (weakest) -->
                    <line x1="90" y1="155" x2="100" y2="148" stroke="#089981" stroke-width="2"/>
                    <line x1="100" y1="148" x2="110" y2="152" stroke="#f23645" stroke-width="2"/>
                    <text x="105" y="170" fill="#f23645" font-size="12">3</text>
                    
                    <!-- Wedge lines -->
                    <line x1="40" y1="120" x2="110" y2="152" stroke="#ffa726" stroke-width="1" stroke-dasharray="5,5"/>
                    <line x1="60" y1="160" x2="90" y2="155" stroke="#ffa726" stroke-width="1" stroke-dasharray="5,5"/>
                    
                    <!-- Resume -->
                    <line x1="110" y1="152" x2="160" y2="60" stroke="#089981" stroke-width="3"/>
                    <circle cx="110" cy="152" r="4" fill="#fff"/>
                </g>

                <!-- Double Bottom Flag -->
                <g transform="translate(390, 50)">
                    <text x="80" y="0" fill="#888" font-size="14" font-weight="bold" text-anchor="middle">åŒåº•ç‰›æ——</text>
                    
                    <!-- Main trend -->
                    <line x1="0" y1="200" x2="40" y2="120" stroke="#089981" stroke-width="2"/>
                    
                    <!-- First bottom -->
                    <line x1="40" y1="120" x2="60" y2="160" stroke="#f23645" stroke-width="2"/>
                    <line x1="60" y1="160" x2="80" y2="140" stroke="#089981" stroke-width="2"/>
                    
                    <!-- Second bottom (same level) -->
                    <line x1="80" y1="140" x2="100" y2="160" stroke="#f23645" stroke-width="2"/>
                    
                    <!-- Double bottom line -->
                    <line x1="60" y1="160" x2="100" y2="160" stroke="#2962ff" stroke-width="1" stroke-dasharray="5,5"/>
                    <text x="80" y="175" fill="#2962ff" font-size="10">åŒåº•æ”¯æ’‘</text>
                    
                    <!-- Resume -->
                    <line x1="100" y1="160" x2="160" y2="60" stroke="#089981" stroke-width="3"/>
                    <circle cx="100" cy="160" r="4" fill="#fff"/>
                </g>

                <!-- Bull Flag -->
                <g transform="translate(560, 50)">
                    <text x="80" y="0" fill="#888" font-size="14" font-weight="bold" text-anchor="middle">ç‰›æ——</text>
                    
                    <!-- Strong uptrend -->
                    <line x1="0" y1="200" x2="30" y2="100" stroke="#089981" stroke-width="3"/>
                    
                    <!-- Flag consolidation -->
                    <line x1="30" y1="100" x2="40" y2="120" stroke="#f23645" stroke-width="1"/>
                    <line x1="40" y1="120" x2="50" y2="110" stroke="#089981" stroke-width="1"/>
                    <line x1="50" y1="110" x2="60" y2="125" stroke="#f23645" stroke-width="1"/>
                    <line x1="60" y1="125" x2="70" y2="115" stroke="#089981" stroke-width="1"/>
                    <line x1="70" y1="115" x2="80" y2="130" stroke="#f23645" stroke-width="1"/>
                    
                    <!-- Flag lines -->
                    <line x1="30" y1="100" x2="80" y2="130" stroke="#ffa726" stroke-width="1" stroke-dasharray="5,5"/>
                    <line x1="40" y1="120" x2="70" y2="115" stroke="#ffa726" stroke-width="1" stroke-dasharray="5,5"/>
                    
                    <!-- Breakout -->
                    <line x1="80" y1="130" x2="160" y2="50" stroke="#089981" stroke-width="3"/>
                    <circle cx="80" cy="130" r="4" fill="#fff"/>
                    <text x="120" y="30" fill="#089981" font-size="10" font-weight="bold">çªç ´ç‚¹</text>
                </g>

                <!-- Bear Flag -->
                <g transform="translate(730, 50)">
                    <text x="80" y="0" fill="#888" font-size="14" font-weight="bold" text-anchor="middle">ç†Šæ——</text>
                    
                    <!-- Strong downtrend -->
                    <line x1="0" y1="50" x2="30" y2="150" stroke="#f23645" stroke-width="3"/>
                    
                    <!-- Flag consolidation -->
                    <line x1="30" y1="150" x2="40" y2="130" stroke="#089981" stroke-width="1"/>
                    <line x1="40" y1="130" x2="50" y2="140" stroke="#f23645" stroke-width="1"/>
                    <line x1="50" y1="140" x2="60" y2="125" stroke="#089981" stroke-width="1"/>
                    <line x1="60" y1="125" x2="70" y2="135" stroke="#f23645" stroke-width="1"/>
                    <line x1="70" y1="135" x2="80" y2="120" stroke="#089981" stroke-width="1"/>
                    
                    <!-- Flag lines -->
                    <line x1="30" y1="150" x2="80" y2="120" stroke="#ffa726" stroke-width="1" stroke-dasharray="5,5"/>
                    <line x1="40" y1="130" x2="70" y2="135" stroke="#ffa726" stroke-width="1" stroke-dasharray="5,5"/>
                    
                    <!-- Breakdown -->
                    <line x1="80" y1="120" x2="160" y2="200" stroke="#f23645" stroke-width="3"/>
                    <circle cx="80" cy="120" r="4" fill="#fff"/>
                    <text x="120" y="220" fill="#f23645" font-size="10" font-weight="bold">çªç ´ç‚¹</text>
                </g>
            </svg>
        </div>
        <div class="fig-caption">å›¾è§£ï¼šäº”ç§æœ€å¸¸è§çš„å›è°ƒæ¨¡å¼ - ABCå›è°ƒã€æ¥”å½¢ã€åŒåº•ç‰›æ——ã€ç‰›æ——ã€ç†Šæ——</div>

        <h4>åè½¬ï¼šå…³é”®æ´å¯Ÿ</h4>
        
        <div class="highlight-box">
            <strong>ğŸ’¡ å…³é”®æ´å¯Ÿï¼š</strong>å¤§å¤šæ•°è¶‹åŠ¿åè½¬éƒ½æ˜¯ä»<strong>å¤±è´¥çš„çªç ´å°è¯•</strong>å¼€å§‹çš„ã€‚<br><br>
            å½“ä»åŒºé—´æˆ–æ——å½¢çš„çªç ´å¤±è´¥æ—¶ï¼Œå¸‚åœºé€šå¸¸ä¼šå°è¯•æœç›¸åæ–¹å‘çŒ›çƒˆç§»åŠ¨ã€‚ä¾‹å¦‚ï¼Œå‘ä¸Šçªç ´çš„å¤±è´¥å°è¯•é€šå¸¸ä¼šå¯¼è‡´æ€¥å‰§ä¸‹è·Œã€‚
        </div>

        <h3>5. å…³é”®ä»·æ ¼æ°´å¹³ï¼šæ”¯æ’‘ä¸é˜»åŠ›</h3>
        
        <p>æ”¯æ’‘å’Œé˜»åŠ›æ˜¯"ç£åŠ›æ°´å¹³"ï¼Œä»·æ ¼åœ¨è¿™äº›æ°´å¹³ä¸Šå¯èƒ½æš‚åœã€æ”¾ç¼“æˆ–åè½¬ã€‚è¿™äº›æ°´å¹³èƒŒåçš„æ ¸å¿ƒæ¦‚å¿µæ˜¯<strong>å¸‚åœºè®°å¿†</strong>ã€‚</p>

        <div class="pattern-grid">
            <div class="pattern-card">
                <div class="pattern-title">è¶‹åŠ¿çº¿</div>
                <div class="pattern-desc">è¿æ¥ä¸€ç³»åˆ—é«˜ç‚¹æˆ–ä½ç‚¹çš„çº¿ï¼Œæ˜¾ç¤ºè¶‹åŠ¿çš„æ–¹å‘å’Œå¼ºåº¦</div>
            </div>
            
            <div class="pattern-card">
                <div class="pattern-title">å‰æœŸæ‘†åŠ¨é«˜ä½ç‚¹</div>
                <div class="pattern-desc">å¸‚åœºæ›¾ç»åè½¬çš„ä»·æ ¼æ°´å¹³ï¼Œå¾€å¾€ä¼šå†æ¬¡èµ·ä½œç”¨</div>
            </div>
            
            <div class="pattern-card">
                <div class="pattern-title">ç§»åŠ¨å¹³å‡çº¿</div>
                <div class="pattern-desc">åŠ¨æ€æ”¯æ’‘/é˜»åŠ›ï¼Œç‰¹åˆ«æ˜¯EMA 20åœ¨è¶‹åŠ¿ä¸­</div>
            </div>
            
            <div class="pattern-card">
                <div class="pattern-title">æµ‹é‡ç§»åŠ¨ç›®æ ‡</div>
                <div class="pattern-desc">åŸºäºåŒºé—´é«˜åº¦æŠ•å°„çš„ç›®æ ‡ä»·ä½</div>
            </div>
        </div>

        <h3>6. å›¾è¡¨è¯­è¨€ï¼šä¿¡å·Kçº¿</h3>
        
        <div class="diagram-box">
            <svg width="700" height="250" viewBox="0 0 700 250">
                <!-- Trend Bar -->
                <g transform="translate(100, 30)">
                    <text x="50" y="0" fill="#888" font-size="14" font-weight="bold" text-anchor="middle">è¶‹åŠ¿Kçº¿</text>
                    
                    <!-- Bull trend bar -->
                    <rect x="30" y="40" width="40" height="120" fill="#089981" stroke="#089981" stroke-width="2"/>
                    <line x1="50" y1="30" x2="50" y2="40" stroke="#089981" stroke-width="2"/>
                    <line x1="50" y1="160" x2="50" y2="170" stroke="#089981" stroke-width="2"/>
                    
                    <text x="50" y="200" fill="#089981" font-size="12" text-anchor="middle">å¤§å®ä½“</text>
                    <text x="50" y="220" fill="#089981" font-size="12" text-anchor="middle">å°å½±çº¿</text>
                </g>

                <!-- Doji Bar -->
                <g transform="translate(300, 30)">
                    <text x="50" y="0" fill="#888" font-size="14" font-weight="bold" text-anchor="middle">åå­—æ˜Ÿ</text>
                    
                    <!-- Doji -->
                    <line x1="50" y1="30" x2="50" y2="170" stroke="#888" stroke-width="2"/>
                    <rect x="45" y="95" width="10" height="10" fill="#888"/>
                    
                    <text x="50" y="200" fill="#888" font-size="12" text-anchor="middle">å°å®ä½“</text>
                    <text x="50" y="220" fill="#888" font-size="12" text-anchor="middle">é•¿å½±çº¿</text>
                </g>

                <!-- Reversal Bar -->
                <g transform="translate(500, 30)">
                    <text x="50" y="0" fill="#888" font-size="14" font-weight="bold" text-anchor="middle">åè½¬Kçº¿</text>
                    
                    <!-- Bull reversal bar -->
                    <line x1="50" y1="30" x2="50" y2="170" stroke="#089981" stroke-width="2"/>
                    <rect x="35" y="50" width="30" height="60" fill="#089981"/>
                    
                    <text x="50" y="200" fill="#089981" font-size="12" text-anchor="middle">é•¿ä¸‹å½±</text>
                    <text x="50" y="220" fill="#089981" font-size="12" text-anchor="middle">å¼ºæ”¶ç›˜</text>
                </g>
            </svg>
        </div>
        <div class="fig-caption">å›¾è§£ï¼šä¸‰ç§å…³é”®Kçº¿ç±»å‹</div>

        <h4>åå­—æ˜ŸKçº¿ï¼šå¸‚åœºçŠ¹è±«ä¸å†³</h4>
        <p>åå­—æ˜ŸKçº¿å…·æœ‰éå¸¸å°çš„å®ä½“å’Œé•¿å½±çº¿ã€‚å®ƒä»£è¡¨çŠ¹è±«ä¸å†³ï¼Œå› ä¸ºä¹°å–åŒæ–¹åœ¨å‘¨æœŸç»“æŸæ—¶éƒ½æ— æ³•è·å¾—æ§åˆ¶æƒã€‚è¿™ç§Kçº¿è¡¨æ˜å¸‚åœºå¤„äºå¹³è¡¡çŠ¶æ€ï¼Œå¯èƒ½é¢„ç¤ºç€è¶‹åŠ¿çš„æš‚åœæˆ–åè½¬ã€‚</p>

        <div class="highlight-box success">
            <strong>æ‰§è¡Œé€»è¾‘ï¼š</strong>åœ¨ä¿¡å·Kçº¿æ”¶ç›˜åå…¥åœºã€‚é€šå¸¸é€šè¿‡åœ¨ä¿¡å·Kçº¿é«˜ç‚¹ä¸Šæ–¹ä¸€ä¸ªè·³åŠ¨ç‚¹ï¼ˆä¹°å…¥ï¼‰æˆ–ä½ç‚¹ä¸‹æ–¹ä¸€ä¸ªè·³åŠ¨ç‚¹ï¼ˆå–å‡ºï¼‰è®¾ç½®æ­¢æŸå•æ¥å®Œæˆã€‚
        </div>
    </div>

    <!-- ========================================== -->
    <!-- PART 2: HIGH 2 / LOW 2 SETUP -->
    <!-- ========================================== -->
    <div class="card">
        <h2>ç¬¬äºŒéƒ¨åˆ†ï¼šç»å…¸è®¾ç½® - High 2 / Low 2</h2>
        
        <p>å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œåœ¨è¶‹åŠ¿å›è°ƒæœŸé—´è¯†åˆ«é«˜æ¦‚ç‡å…¥åœºçš„æœ€å¯é æ–¹æ³•ä¹‹ä¸€æ˜¯è®¡ç®—"é«˜ç‚¹"å’Œ"ä½ç‚¹"ã€‚è¿™ç§æ–¹æ³•æä¾›äº†ä¸€ç§ç»“æ„åŒ–çš„æ–¹å¼æ¥è¯†åˆ«ç»å…¸çš„ä¸¤æ®µå›è°ƒã€‚</p>

        <h3>High 2 (H2) ä¹°å…¥è®¾ç½®è¯¦è§£</h3>
        
        <div class="highlight-box">
            <strong>æ­¥éª¤æµç¨‹ï¼š</strong>
            <ol style="margin-top: 15px;">
                <li><strong>è¯†åˆ«è¶‹åŠ¿ï¼š</strong>ç¡®è®¤å¸‚åœºå¤„äºæ˜ç¡®çš„ä¸Šå‡è¶‹åŠ¿ï¼ˆå½¢æˆæ›´é«˜çš„é«˜ç‚¹å’Œæ›´é«˜çš„ä½ç‚¹ï¼‰</li>
                <li><strong>ç­‰å¾…å›è°ƒï¼š</strong>ä»·æ ¼å¼€å§‹ä¸‹è·Œï¼Œé€†è¶‹åŠ¿ç§»åŠ¨</li>
                <li><strong>è®¡æ•°ç¬¬ä¸€æ¬¡ä¸Šæ¨ï¼ˆHigh 1ï¼‰ï¼š</strong>åœ¨å›è°ƒæœŸé—´ï¼Œç¬¬ä¸€æ¬¡Kçº¿çš„é«˜ç‚¹é«˜äºå‰ä¸€æ ¹Kçº¿çš„é«˜ç‚¹ï¼Œè¯¥ä¸Šæ¨æ ‡è®°ä¸º"High 1"ã€‚å¸‚åœºé€šå¸¸åœ¨æ­¤åˆå§‹å°è¯•æ¢å¤è¶‹åŠ¿åç»§ç»­ä¸‹è·Œ</li>
                <li><strong>è¯†åˆ«ä¿¡å·Kçº¿ï¼ˆHigh 2ï¼‰ï¼š</strong>å½“å›è°ƒç»§ç»­æ—¶ï¼Œç¬¬äºŒæ¬¡Kçº¿çš„é«˜ç‚¹é«˜äºå‰ä¸€æ ¹Kçº¿çš„é«˜ç‚¹ï¼Œè¿™æ ¹Kçº¿å°±æ˜¯"High 2"ï¼Œä½œä¸ºä½ çš„ä¿¡å·Kçº¿</li>
                <li><strong>å…¥åœºï¼š</strong>é€šå¸¸åœ¨è¯¥Kçº¿é«˜ç‚¹ä¸Šæ–¹ä¸€ä¸ªè·³åŠ¨ç‚¹è®¾ç½®ä¹°å…¥æ­¢æŸå•ä»¥è¿›å…¥äº¤æ˜“</li>
            </ol>
        </div>

        <div class="diagram-box">
            <svg width="800" height="350" viewBox="0 0 800 350">
                <!-- Uptrend -->
                <g transform="translate(50, 50)">
                    <!-- Main uptrend -->
                    <line x1="0" y1="250" x2="100" y2="150" stroke="#089981" stroke-width="2"/>
                    <text x="50" y="130" fill="#089981" font-size="12">ä¸Šå‡è¶‹åŠ¿</text>
                    
                    <!-- Pullback starts -->
                    <line x1="100" y1="150" x2="150" y2="200" stroke="#f23645" stroke-width="2"/>
                    
                    <!-- High 1 -->
                    <line x1="150" y1="200" x2="200" y2="180" stroke="#089981" stroke-width="2"/>
                    <circle cx="200" cy="180" r="6" fill="#ffa726"/>
                    <text x="200" y="165" fill="#ffa726" font-size="14" font-weight="bold" text-anchor="middle">High 1</text>
                    
                    <!-- Continue pullback -->
                    <line x1="200" y1="180" x2="250" y2="210" stroke="#f23645" stroke-width="2"/>
                    
                    <!-- High 2 (Signal bar) -->
                    <line x1="250" y1="210" x2="300" y2="190" stroke="#089981" stroke-width="2"/>
                    <circle cx="300" cy="190" r="6" fill="#2962ff"/>
                    <text x="300" y="175" fill="#2962ff" font-size="14" font-weight="bold" text-anchor="middle">High 2</text>
                    <text x="300" y="230" fill="#2962ff" font-size="12" text-anchor="middle">ä¿¡å·Kçº¿</text>
                    
                    <!-- Entry point -->
                    <circle cx="310" cy="185" r="8" fill="none" stroke="#fff" stroke-width="2"/>
                    <text x="350" y="190" fill="#fff" font-size="13" font-weight="bold">å…¥åœºç‚¹</text>
                    
                    <!-- Resume trend -->
                    <line x1="300" y1="190" x2="400" y2="80" stroke="#089981" stroke-width="3"/>
                    
                    <!-- Labels -->
                    <text x="175" y="270" fill="#f23645" font-size="13">å›è°ƒé˜¶æ®µ</text>
                    <line x1="150" y1="260" x2="250" y2="260" stroke="#f23645" stroke-width="1" stroke-dasharray="5,5"/>
                </g>
                
                <!-- Explanation box -->
                <g transform="translate(480, 50)">
                    <rect x="0" y="0" width="280" height="280" fill="#2a2e39" stroke="#2962ff" stroke-width="1" rx="8"/>
                    
                    <text x="140" y="30" fill="#2962ff" font-size="16" font-weight="bold" text-anchor="middle">H2 è®¾ç½®æ ¸å¿ƒé€»è¾‘</text>
                    
                    <text x="20" y="70" fill="#fff" font-size="13" font-weight="bold">âœ… ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Ÿ</text>
                    <text x="20" y="95" fill="#b2b5be" font-size="11">â€¢ ä¸¤æ®µå›è°ƒæ˜¯æœ€å¸¸è§çš„æ¨¡å¼</text>
                    <text x="20" y="115" fill="#b2b5be" font-size="11">â€¢ High 2 è¡¨æ˜å›è°ƒå¯èƒ½ç»“æŸ</text>
                    <text x="20" y="135" fill="#b2b5be" font-size="11">â€¢ ä¸åŸè¶‹åŠ¿æ–¹å‘ä¸€è‡´</text>
                    
                    <text x="20" y="170" fill="#fff" font-size="13" font-weight="bold">ğŸ¯ æ‰§è¡Œè¦ç‚¹</text>
                    <text x="20" y="195" fill="#b2b5be" font-size="11">â€¢ å…¥åœºï¼šH2 é«˜ç‚¹ä¸Šæ–¹ 1 tick</text>
                    <text x="20" y="215" fill="#b2b5be" font-size="11">â€¢ æ­¢æŸï¼šH2 ä½ç‚¹ä¸‹æ–¹</text>
                    <text x="20" y="235" fill="#b2b5be" font-size="11">â€¢ ç›®æ ‡ï¼šå‰æœŸé«˜ç‚¹æˆ–æµ‹é‡ç§»åŠ¨</text>
                    
                    <text x="20" y="265" fill="#089981" font-size="11" font-weight="bold">ç›ˆäºæ¯”é€šå¸¸ 1:2 æˆ–æ›´å¥½</text>
                </g>
            </svg>
        </div>
        <div class="fig-caption">å›¾è§£ï¼šHigh 2 ä¹°å…¥è®¾ç½®å®Œæ•´æµç¨‹</div>

        <h3>Low 2 (L2) å–å‡ºè®¾ç½®</h3>
        
        <p><strong>Low 2 å–å‡ºè®¾ç½®</strong>æ˜¯åœ¨ä¸‹é™è¶‹åŠ¿å›è°ƒæœŸé—´å‘ç”Ÿçš„å®Œå…¨ç›¸åçš„æ¨¡å¼ã€‚</p>

        <div class="pattern-grid">
            <div class="pattern-card">
                <div class="pattern-title">è¯†åˆ«ä¸‹é™è¶‹åŠ¿</div>
                <div class="pattern-desc">ç¡®è®¤å¸‚åœºå½¢æˆæ›´ä½çš„é«˜ç‚¹å’Œæ›´ä½çš„ä½ç‚¹</div>
            </div>
            
            <div class="pattern-card">
                <div class="pattern-title">ç­‰å¾…å›è°ƒ</div>
                <div class="pattern-desc">ä»·æ ¼å‘ä¸Šç§»åŠ¨ï¼Œé€†è¶‹åŠ¿åå¼¹</div>
            </div>
            
            <div class="pattern-card">
                <div class="pattern-title">è®¡æ•° Low 1</div>
                <div class="pattern-desc">ç¬¬ä¸€æ¬¡Kçº¿ä½ç‚¹ä½äºå‰ä¸€æ ¹Kçº¿ä½ç‚¹</div>
            </div>
            
            <div class="pattern-card">
                <div class="pattern-title">æ•è· Low 2</div>
                <div class="pattern-desc">ç¬¬äºŒæ¬¡å‡ºç°ä½ç‚¹ï¼Œåœ¨å…¶ä¸‹æ–¹1 tickè®¾ç½®å–å‡ºæ­¢æŸå•</div>
            </div>
        </div>
    </div>

    <!-- ========================================== -->
    <!-- PART 3: OPENING & BOM (ä¿æŒåŸå†…å®¹) -->
    <!-- ========================================== -->
    <div class="card">
        <h2>ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ—©ç›˜å†³èƒœæ•°æ® (Opening Session)</h2>
        <p>å¼€ç›˜å‰ä¸¤ä¸ªå°æ—¶æ˜¯æœºæ„å»ºç«‹åº“å­˜çš„é»„é‡‘æ—¶æ®µã€‚</p>

        <div class="stat-row">
            <div class="stat-box">
                <span class="stat-num">90%</span>
                <span class="stat-label">å…¨å¤©é«˜ä½ç‚¹<br>åœ¨å‰90åˆ†é’Ÿç¡®ç«‹</span>
            </div>
            <div class="stat-box">
                <span class="stat-num">82%</span>
                <span class="stat-label">å¼€ç›˜å€¾å‘å½¢æˆ<br>éœ‡è¡åŒºé—´</span>
            </div>
            <div class="stat-box">
                <span class="stat-num">68%</span>
                <span class="stat-label">ç¬¬ä¸€æ¬¡çªç ´æ–¹å‘<br>æˆä¸ºä¸»è¶‹åŠ¿</span>
            </div>
        </div>

        <h3>1. 90åˆ†é’Ÿæ³•åˆ™</h3>
        <p>è§‚å¯Ÿå‰18æ ¹5åˆ†é’ŸKçº¿å½¢æˆçš„åŒºé—´ã€‚ä»·æ ¼çªç ´åŒºé—´é¡¶éƒ¨ï¼Œåˆ™åŒºé—´åº•éƒ¨æœ‰90%æ¦‚ç‡æˆä¸ºå½“å¤©æœ€ä½ç‚¹ã€‚</p>

        <h3>2. æµ‹é‡ç§»åŠ¨ (Measured Move)</h3>
        <p>å½“å¼€ç›˜åŒºé—´è¢«çªç ´æ—¶ï¼Œç®—æ³•ä¼šè‡ªåŠ¨å°†"åŒºé—´é«˜åº¦"æŠ•å°„å‡ºå»ä½œä¸ºç›®æ ‡ã€‚</p>
    </div>

    <div class="card">
        <h2>ç¬¬å››éƒ¨åˆ†ï¼šçªç ´æ¨¡å¼æˆ˜æ³• (BOM Pattern)</h2>
        <p><strong>Breakout Mode (BOM)</strong> æ˜¯å¼€ç›˜æœ€å¼ºå¤§çš„å½¢æ€ã€‚</p>

        <h3>BOM å››å¤§é“å¾‹</h3>
        <ul>
            <li><strong>åŸºå‡†å¾‹ï¼š</strong>ä»¥ç¬¬1æ ¹5åˆ†é’ŸKçº¿ä¸ºå‚è€ƒç³»</li>
            <li><strong>ä¸Šæ”»å¤±è´¥å¾‹ï¼š</strong>ä»·æ ¼æ›¾çªç ´ä½†è¢«æ‹‰å›</li>
            <li><strong>ä¸‹æ”»å¤±è´¥å¾‹ï¼š</strong>ä»·æ ¼æ›¾çªç ´ä½†è¢«æ‹‰å›</li>
            <li><strong>æ—¶é—´è¿‡æ»¤å¾‹ï¼š</strong>æŒç»­ â‰¥10æ ¹Kçº¿</li>
        </ul>
    </div>

    <!-- ========================================== -->
    <!-- PART 5: CONCLUSION (æ–°å¢æ€»ç»“éƒ¨åˆ†) -->
    <!-- ========================================== -->
    <div class="card">
        <h2>æ€»ç»“ï¼šä½ çš„ä»·æ ¼è¡Œä¸ºåŸºç¡€</h2>
        
        <div class="highlight-box success">
            <strong>å­¦ä¹ è·¯å¾„æ¡†æ¶ï¼š</strong><br>
            ç†è§£å¸‚åœºçŠ¶æ€ï¼ˆè¶‹åŠ¿/åŒºé—´ï¼‰ â†’ è¯†åˆ«å¸‚åœºè½¬æ¢ï¼ˆçªç ´/åè½¬ï¼‰ â†’ å‘ç°è¶‹åŠ¿æš‚åœï¼ˆå›è°ƒï¼‰ â†’ å®šä½å…³é”®æ°´å¹³ï¼ˆæ”¯æ’‘/é˜»åŠ›ï¼‰ â†’ è§£è¯»æœ€å°ç»„ä»¶ï¼ˆä¿¡å·Kçº¿å’Œè®¾ç½®ï¼‰
        </div>

        <p>ä½ å·²ç»å­¦ä¹ äº†ä»·æ ¼è¡Œä¸ºäº¤æ˜“çš„åŸºæœ¬æ„å»ºæ¨¡å—ã€‚è¿™ä¸ªå­¦ä¹ è·¯å¾„â€”â€”ä»ç†è§£å¸‚åœºçŠ¶æ€ï¼ˆè¶‹åŠ¿/åŒºé—´ï¼‰å’Œè¯†åˆ«è½¬æ¢ï¼ˆçªç ´/åè½¬ï¼‰ï¼Œåˆ°å‘ç°æš‚åœï¼ˆå›è°ƒï¼‰ï¼Œå®šä½å…³é”®æ°´å¹³ï¼ˆæ”¯æ’‘/é˜»åŠ›ï¼‰ï¼Œæœ€åè§£è¯»æœ€å°ç»„ä»¶ï¼ˆä¿¡å·Kçº¿å’Œè®¾ç½®ï¼‰â€”â€”æ„æˆäº†å›¾è¡¨åˆ†æçš„åŸºçŸ³ã€‚</p>

        <p>æŒæ¡è¿™äº›åŸºç¡€çŸ¥è¯†æ˜¯åœ¨é˜…è¯»ä»»ä½•ä»·æ ¼å›¾è¡¨å¹¶åšå‡ºæ˜æ™ºã€è‡ªä¿¡çš„äº¤æ˜“å†³ç­–çš„æ—…ç¨‹ä¸­ç¬¬ä¸€ä¸ªä¹Ÿæ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚</p>

        <div class="pattern-grid">
            <div class="pattern-card">
                <div class="pattern-title">æŒç»­å­¦ä¹ </div>
                <div class="pattern-desc">ä»·æ ¼è¡Œä¸ºæ˜¯ç»ˆèº«çš„æ—…ç¨‹ï¼Œå¸‚åœºä¸æ–­æ¼”å˜ï¼Œéœ€è¦æŒç»­å­¦ä¹ å’Œé€‚åº”</div>
            </div>
            
            <div class="pattern-card">
                <div class="pattern-title">å®è·µåº”ç”¨</div>
                <div class="pattern-desc">ç†è®ºçŸ¥è¯†éœ€è¦é€šè¿‡æ¨¡æ‹Ÿäº¤æ˜“å’Œå®ç›˜äº¤æ˜“æ¥è½¬åŒ–ä¸ºå®é™…æŠ€èƒ½</div>
            </div>
            
            <div class="pattern-card">
                <div class="pattern-title">å¿ƒç†çºªå¾‹</div>
                <div class="pattern-desc">æˆåŠŸçš„äº¤æ˜“ä¸ä»…éœ€è¦æŠ€æœ¯çŸ¥è¯†ï¼Œè¿˜éœ€è¦å¼ºå¤§çš„å¿ƒç†çºªå¾‹</div>
            </div>
        </div>
    </div>

    <!-- ========================================== -->
    <!-- PART 4: SIMULATOR (ä¼˜åŒ–ç‰ˆ) -->
    <!-- ========================================== -->
    <div class="card">
        <h2>å®æˆ˜æ¨¡æ‹Ÿï¼šæ™ºèƒ½äº¤æ˜“æ¼”ç»ƒç³»ç»Ÿ</h2>
        <p>æ•´åˆæ‰€å­¦ï¼šè§‚å¯Ÿ <span class="c-orange">EMA 20</span> çš„æ–œç‡åˆ¤æ–­è¶‹åŠ¿ï¼Œå¯»æ‰¾ <span class="c-blue">H2å›è°ƒ</span> æˆ– <span class="c-green">BOMçªç ´</span>ã€‚</p>

        <div class="timeframe-selector">
            <button class="tf-btn active" data-tf="1m">1åˆ†é’Ÿ</button>
            <button class="tf-btn" data-tf="5m">5åˆ†é’Ÿ</button>
            <button class="tf-btn" data-tf="15m">15åˆ†é’Ÿ</button>
            <button class="tf-btn" data-tf="1h">1å°æ—¶</button>
        </div>

        <div class="chart-wrapper">
            <div class="chart-header">
                <div class="chart-title">ä»·æ ¼èµ°åŠ¿å›¾</div>
                <div class="chart-indicators">
                    <div class="indicator">
                        <div class="indicator-dot" style="background: #ffa726;"></div>
                        <span>EMA 20</span>
                    </div>
                </div>
            </div>
            
            <div class="chart-container">
                <canvas id="chartCanvas"></canvas>
                <!-- ç§»é™¤ä¿¡å·è¦†ç›–å±‚ -->
            </div>
        </div>

        <div class="trading-panel">
            <div class="panel-row">
                <div class="panel-section">
                    <div class="section-label">ç­–ç•¥é€‰æ‹©</div>
                    <div class="strategy-selector">
                        <select id="strategySelect">
                            <option value="manual">æ‰‹åŠ¨äº¤æ˜“</option>
                            <option value="ema">EMA 20 ç­–ç•¥</option>
                            <option value="h2">High 2 / Low 2</option>
                            <option value="bom">BOM Pattern</option>
                        </select>
                    </div>
                </div>
                
                <div class="panel-section">
                    <div class="section-label">é€Ÿåº¦æ§åˆ¶</div>
                    <div class="speed-control">
                        <input type="range" id="speedSlider" class="speed-slider" min="1" max="10" value="5">
                        <span class="speed-label" id="speedLabel">5x</span>
                    </div>
                </div>
            </div>

            <div class="panel-row">
                <div class="controls">
                    <button class="btn btn-blue" id="btnPlay">
                        <span>â–¶</span> æ’­æ”¾
                    </button>
                    <button class="btn btn-next" id="btnNext">
                        <span>â­ï¸</span> ä¸‹ä¸€æ ¹Kçº¿
                    </button>
                    <button class="btn btn-buy" id="btnBuy">
                        <span>ğŸ“ˆ</span> ä¹°å…¥
                    </button>
                    <button class="btn btn-sell" id="btnSell">
                        <span>ğŸ“‰</span> å–å‡º
                    </button>
                    <button class="btn btn-gray" id="btnReset">
                        <span>ğŸ”„</span> é‡ç½®
                    </button>
                </div>
            </div>

            <div class="hud">
                <div class="hud-item">
                    <div class="hud-label">å½“å‰ä»·æ ¼</div>
                    <div class="hud-value neutral" id="hudPrice">--</div>
                </div>
                <div class="hud-item">
                    <div class="hud-label">æŒä»“çŠ¶æ€</div>
                    <div class="hud-value neutral" id="hudPosition">--</div>
                </div>
                <div class="hud-item">
                    <div class="hud-label">æµ®åŠ¨ç›ˆäº</div>
                    <div class="hud-value neutral" id="hudPnL">0.00</div>
                </div>
                <div class="hud-item">
                    <div class="hud-label">è´¦æˆ·ä½™é¢</div>
                    <div class="hud-value neutral" id="hudBalance">10000.00</div>
                </div>
                <div class="hud-item">
                    <div class="hud-label">äº¤æ˜“æ¬¡æ•°</div>
                    <div class="hud-value neutral" id="hudTrades">0</div>
                </div>
                <div class="hud-item">
                    <div class="hud-label">èƒœç‡</div>
                    <div class="hud-value neutral" id="hudWinRate">0%</div>
                </div>
            </div>
        </div>

        <div class="trade-history">
            <div class="history-header">
                <div class="history-title">äº¤æ˜“è®°å½•</div>
                <button class="clear-history" id="btnClearHistory">æ¸…ç©ºè®°å½•</button>
            </div>
            <div id="tradeList">
                <div class="empty-state">æš‚æ— äº¤æ˜“è®°å½•</div>
            </div>
        </div>
    </div>

</div>

<footer>
    <p>åŸºäº AL BROOKS ä»·æ ¼è¡Œä¸ºä½“ç³» | èåˆç»å…¸ç†è®ºä¸å®æˆ˜ç­–ç•¥</p>
    <p>Â© Jimmy 2025 | All Rights Reserved</p>
    <p style="font-size: 0.8rem; margin-top: 20px; opacity: 0.6;">Disclaimer: For educational purposes only.</p>
</footer>

<script>
class TradingSimulator {
    constructor() {
        this.canvas = document.getElementById('chartCanvas');
        this.ctx = this.canvas.getContext('2d');
        
        this.candleWidth = 8;
        this.candleSpacing = 2;
        this.padding = { top: 20, right: 80, bottom: 30, left: 60 };
        
        this.bars = [];
        this.emaData = [];
        
        this.position = null;
        this.balance = 10000;
        this.initialBalance = 10000;
        this.trades = [];
        
        this.isPlaying = false;
        this.playInterval = null;
        this.speed = 5;
        this.timeframe = '1m';
        this.strategy = 'manual';
        
        this.currentPrice = 1000;
        this.trend = 0;
        this.volatility = 2;
        
        this.init();
    }

    init() {
        this.setupCanvas();
        this.setupEventListeners();
        this.generateInitialData();
        this.render();
        this.updateHUD();
    }

    setupCanvas() {
        const resize = () => {
            const container = this.canvas.parentElement;
            this.canvas.width = container.clientWidth;
            this.canvas.height = container.clientHeight;
            this.render();
        };
        resize();
        window.addEventListener('resize', resize);
    }

    setupEventListeners() {
        document.querySelectorAll('.tf-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('.tf-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                this.timeframe = e.target.dataset.tf;
                this.reset();
            });
        });

        document.getElementById('strategySelect').addEventListener('change', (e) => {
            this.strategy = e.target.value;
        });

        document.getElementById('speedSlider').addEventListener('input', (e) => {
            this.speed = parseInt(e.target.value);
            document.getElementById('speedLabel').textContent = this.speed + 'x';
            if (this.isPlaying) {
                this.stop();
                this.play();
            }
        });

        document.getElementById('btnPlay').addEventListener('click', () => this.togglePlay());
        document.getElementById('btnNext').addEventListener('click', () => this.nextBar());
        document.getElementById('btnBuy').addEventListener('click', () => this.trade('long'));
        document.getElementById('btnSell').addEventListener('click', () => this.trade('short'));
        document.getElementById('btnReset').addEventListener('click', () => this.reset());
        document.getElementById('btnClearHistory').addEventListener('click', () => this.clearHistory());
    }

    generateInitialData() {
        this.bars = [];
        this.emaData = [];
        this.currentPrice = 1000;
        this.trend = (Math.random() - 0.5) * 0.5;
        
        for (let i = 0; i < 100; i++) {
            this.generateNextBar();
        }
    }

    generateNextBar() {
        if (Math.random() < 0.02) {
            this.trend = (Math.random() - 0.5) * 0.8;
        }

        const trendMove = this.trend * this.volatility;
        const randomMove = (Math.random() - 0.5) * this.volatility * 2;
        const move = trendMove + randomMove;

        const open = this.currentPrice;
        const close = open + move;
        const high = Math.max(open, close) + Math.random() * this.volatility * 0.5;
        const low = Math.min(open, close) - Math.random() * this.volatility * 0.5;

        this.currentPrice = close;

        const bar = {
            time: Date.now(),
            open: parseFloat(open.toFixed(2)),
            high: parseFloat(high.toFixed(2)),
            low: parseFloat(low.toFixed(2)),
            close: parseFloat(close.toFixed(2))
        };

        this.bars.push(bar);
        this.calculateEMA();

        if (this.strategy !== 'manual' && this.isPlaying) {
            this.executeStrategy();
        }

        if (this.bars.length > 200) {
            this.bars.shift();
            this.emaData.shift();
        }

        return bar;
    }

    nextBar() {
        this.generateNextBar();
        this.render();
        this.updateHUD();
    }

    calculateEMA() {
        const period = 20;
        const multiplier = 2 / (period + 1);

        if (this.bars.length < period) {
            const sum = this.bars.slice(-this.bars.length).reduce((s, b) => s + b.close, 0);
            this.emaData.push(sum / this.bars.length);
        } else {
            const lastEma = this.emaData[this.emaData.length - 1];
            const currentClose = this.bars[this.bars.length - 1].close;
            const ema = (currentClose - lastEma) * multiplier + lastEma;
            this.emaData.push(ema);
        }
    }

    executeStrategy() {
        if (this.bars.length < 20) return;

        const current = this.bars[this.bars.length - 1];
        const ema = this.emaData[this.emaData.length - 1];
        const prevEma = this.emaData[this.emaData.length - 2] || ema;

        switch (this.strategy) {
            case 'ema':
                if (current.close > ema && prevEma && this.bars[this.bars.length - 2].close <= prevEma) {
                    if (!this.position || this.position.type !== 'long') {
                        if (this.position) this.closeTrade();
                        this.trade('long');
                    }
                } else if (current.close < ema && prevEma && this.bars[this.bars.length - 2].close >= prevEma) {
                    if (!this.position || this.position.type !== 'short') {
                        if (this.position) this.closeTrade();
                        this.trade('short');
                    }
                }
                break;

            case 'h2':
                // ç®€åŒ–çš„H2ç­–ç•¥é€»è¾‘
                if (this.bars.length >= 10) {
                    const recentBars = this.bars.slice(-10);
                    let highCount = 0;
                    
                    for (let i = 1; i < recentBars.length; i++) {
                        if (recentBars[i].high > recentBars[i-1].high) {
                            highCount++;
                            if (highCount === 2 && !this.position) {
                                this.trade('long');
                                break;
                            }
                        }
                    }
                }
                break;

            case 'bom':
                if (this.bars.length >= 20) {
                    const recentHigh = Math.max(...this.bars.slice(-20, -1).map(b => b.high));
                    const recentLow = Math.min(...this.bars.slice(-20, -1).map(b => b.low));
                    
                    if (current.close > recentHigh && !this.position) {
                        this.trade('long');
                    } else if (current.close < recentLow && !this.position) {
                        this.trade('short');
                    }
                }
                break;
        }
    }

    trade(type) {
        const currentBar = this.bars[this.bars.length - 1];
        const price = currentBar.close;

        if (this.position) {
            this.closeTrade();
        }

        this.position = {
            type: type,
            entry: price,
            size: 1,
            time: new Date().toLocaleTimeString()
        };

        this.updateHUD();
        this.updateButtons();
    }

    closeTrade() {
        if (!this.position) return;

        const currentBar = this.bars[this.bars.length - 1];
        const exitPrice = currentBar.close;
        
        const pnl = this.position.type === 'long'
            ? (exitPrice - this.position.entry) * this.position.size
            : (this.position.entry - exitPrice) * this.position.size;

        this.balance += pnl;

        this.trades.push({
            type: this.position.type,
            entry: this.position.entry,
            exit: exitPrice,
            pnl: pnl,
            time: this.position.time,
            exitTime: new Date().toLocaleTimeString()
        });

        this.position = null;
        this.updateHUD();
        this.updateButtons();
        this.updateTradeHistory();
    }

    togglePlay() {
        if (this.isPlaying) {
            this.stop();
        } else {
            this.play();
        }
    }

    play() {
        this.isPlaying = true;
        document.getElementById('btnPlay').innerHTML = '<span>â¸</span> æš‚åœ';
        
        const interval = 1000 / this.speed;
        this.playInterval = setInterval(() => {
            this.generateNextBar();
            this.render();
            this.updateHUD();
        }, interval);
    }

    stop() {
        this.isPlaying = false;
        document.getElementById('btnPlay').innerHTML = '<span>â–¶</span> æ’­æ”¾';
        
        if (this.playInterval) {
            clearInterval(this.playInterval);
            this.playInterval = null;
        }
    }

    reset() {
        this.stop();
        
        if (this.position) {
            this.closeTrade();
        }
        
        this.balance = this.initialBalance;
        this.trades = [];
        this.generateInitialData();
        this.render();
        this.updateHUD();
        this.updateTradeHistory();
        this.updateButtons();
    }

    clearHistory() {
        this.trades = [];
        this.updateTradeHistory();
        this.updateHUD();
    }

    updateHUD() {
        const currentBar = this.bars[this.bars.length - 1];
        if (!currentBar) return;

        document.getElementById('hudPrice').textContent = currentBar.close.toFixed(2);

        if (this.position) {
            const posText = this.position.type === 'long' ? 'åšå¤š' : 'åšç©º';
            document.getElementById('hudPosition').textContent = `${posText} @ ${this.position.entry.toFixed(2)}`;
            document.getElementById('hudPosition').className = 'hud-value ' + (this.position.type === 'long' ? 'positive' : 'negative');
        } else {
            document.getElementById('hudPosition').textContent = 'æ— æŒä»“';
            document.getElementById('hudPosition').className = 'hud-value neutral';
        }

        let floatingPnL = 0;
        if (this.position) {
            floatingPnL = this.position.type === 'long'
                ? (currentBar.close - this.position.entry) * this.position.size
                : (this.position.entry - currentBar.close) * this.position.size;
        }
        
        document.getElementById('hudPnL').textContent = floatingPnL.toFixed(2);
        document.getElementById('hudPnL').className = 'hud-value ' + (floatingPnL >= 0 ? 'positive' : 'negative');

        const totalBalance = this.balance + floatingPnL;
        document.getElementById('hudBalance').textContent = totalBalance.toFixed(2);
        document.getElementById('hudBalance').className = 'hud-value ' + (totalBalance >= this.initialBalance ? 'positive' : 'negative');

        document.getElementById('hudTrades').textContent = this.trades.length;

        const winningTrades = this.trades.filter(t => t.pnl > 0).length;
        const winRate = this.trades.length > 0 ? ((winningTrades / this.trades.length) * 100).toFixed(0) : 0;
        document.getElementById('hudWinRate').textContent = winRate + '%';
        document.getElementById('hudWinRate').className = 'hud-value ' + (winRate >= 50 ? 'positive' : 'negative');
    }

    updateButtons() {
        const btnBuy = document.getElementById('btnBuy');
        const btnSell = document.getElementById('btnSell');

        if (this.position) {
            if (this.position.type === 'long') {
                btnBuy.innerHTML = '<span>âœ“</span> å¹³å¤š';
                btnBuy.className = 'btn btn-gray';
                btnSell.disabled = true;
            } else {
                btnSell.innerHTML = '<span>âœ“</span> å¹³ç©º';
                btnSell.className = 'btn btn-gray';
                btnBuy.disabled = true;
            }
        } else {
            btnBuy.innerHTML = '<span>ğŸ“ˆ</span> ä¹°å…¥';
            btnBuy.className = 'btn btn-buy';
            btnBuy.disabled = false;
            btnSell.innerHTML = '<span>ğŸ“‰</span> å–å‡º';
            btnSell.className = 'btn btn-sell';
            btnSell.disabled = false;
        }
    }

    updateTradeHistory() {
        const list = document.getElementById('tradeList');
        
        if (this.trades.length === 0) {
            list.innerHTML = '<div class="empty-state">æš‚æ— äº¤æ˜“è®°å½•</div>';
            return;
        }

        list.innerHTML = '';
        
        const recentTrades = this.trades.slice(-20).reverse();
        
        recentTrades.forEach(trade => {
            const item = document.createElement('div');
            item.className = 'trade-item';
            
            const badge = document.createElement('div');
            badge.className = `trade-badge ${trade.type}`;
            badge.textContent = trade.type === 'long' ? 'å¤š' : 'ç©º';
            
            const details = document.createElement('div');
            details.className = 'trade-details';
            details.textContent = `${trade.entry.toFixed(2)} â†’ ${trade.exit.toFixed(2)}`;
            
            const pnl = document.createElement('div');
            pnl.className = 'trade-pnl';
            pnl.textContent = (trade.pnl >= 0 ? '+' : '') + trade.pnl.toFixed(2);
            pnl.style.color = trade.pnl >= 0 ? 'var(--accent-green)' : 'var(--accent-red)';
            
            const time = document.createElement('div');
            time.className = 'trade-time';
            time.textContent = trade.exitTime;
            
            item.appendChild(badge);
            item.appendChild(details);
            item.appendChild(pnl);
            item.appendChild(time);
            
            list.appendChild(item);
        });
    }

    render() {
        const ctx = this.ctx;
        const width = this.canvas.width;
        const height = this.canvas.height;

        ctx.fillStyle = '#000';
        ctx.fillRect(0, 0, width, height);

        if (this.bars.length === 0) return;

        const chartWidth = width - this.padding.left - this.padding.right;
        const maxBars = Math.floor(chartWidth / (this.candleWidth + this.candleSpacing));
        const visibleBars = this.bars.slice(-maxBars);
        const visibleEma = this.emaData.slice(-maxBars);

        let minPrice = Infinity;
        let maxPrice = -Infinity;
        
        visibleBars.forEach(bar => {
            if (bar.low < minPrice) minPrice = bar.low;
            if (bar.high > maxPrice) maxPrice = bar.high;
        });

        const priceRange = maxPrice - minPrice;
        const padding = priceRange * 0.1;
        minPrice -= padding;
        maxPrice += padding;

        const chartHeight = height - this.padding.top - this.padding.bottom;

        const priceToY = (price) => {
            return this.padding.top + chartHeight * (1 - (price - minPrice) / (maxPrice - minPrice));
        };

        const indexToX = (index) => {
            return this.padding.left + index * (this.candleWidth + this.candleSpacing) + this.candleWidth / 2;
        };

        // Grid
        ctx.strokeStyle = 'rgba(42, 46, 57, 0.5)';
        ctx.lineWidth = 1;
        
        for (let i = 0; i <= 5; i++) {
            const y = this.padding.top + (chartHeight / 5) * i;
            ctx.beginPath();
            ctx.moveTo(this.padding.left, y);
            ctx.lineTo(width - this.padding.right, y);
            ctx.stroke();
            
            const price = maxPrice - (maxPrice - minPrice) * (i / 5);
            ctx.fillStyle = '#666';
            ctx.font = '11px monospace';
            ctx.textAlign = 'right';
            ctx.fillText(price.toFixed(2), width - this.padding.right + 50, y + 4);
        }

        // EMA
        if (visibleEma.length > 1) {
            ctx.strokeStyle = '#ffa726';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            visibleEma.forEach((ema, i) => {
                const x = indexToX(i);
                const y = priceToY(ema);
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            
            ctx.stroke();
        }

        // Candlesticks
        visibleBars.forEach((bar, i) => {
            const x = indexToX(i);
            const yOpen = priceToY(bar.open);
            const yClose = priceToY(bar.close);
            const yHigh = priceToY(bar.high);
            const yLow = priceToY(bar.low);
            
            const isBullish = bar.close >= bar.open;
            const color = isBullish ? '#089981' : '#f23645';
            
            ctx.strokeStyle = color;
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(x, yHigh);
            ctx.lineTo(x, yLow);
            ctx.stroke();
            
            ctx.fillStyle = color;
            const bodyHeight = Math.abs(yClose - yOpen);
            ctx.fillRect(
                x - this.candleWidth / 2,
                Math.min(yOpen, yClose),
                this.candleWidth,
                Math.max(bodyHeight, 1)
            );
        });

        if (this.position) {
            const y = priceToY(this.position.entry);
            ctx.strokeStyle = this.position.type === 'long' ? '#089981' : '#f23645';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(this.padding.left, y);
            ctx.lineTo(width - this.padding.right, y);
            ctx.stroke();
            ctx.setLineDash([]);
            
            ctx.fillStyle = this.position.type === 'long' ? '#089981' : '#f23645';
            ctx.font = 'bold 12px sans-serif';
            ctx.textAlign = 'left';
            ctx.fillText(
                `${this.position.type.toUpperCase()} @ ${this.position.entry.toFixed(2)}`,
                this.padding.left + 10,
                y - 10
            );
        }
    }
}

let simulator;
window.addEventListener('load', () => {
    simulator = new TradingSimulator();
});
</script>

</body>
</html>